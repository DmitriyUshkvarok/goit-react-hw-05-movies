"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[394],{4309:function(e,r,t){t.r(r),t.d(r,{default:function(){return P}});var n=t(3433),a=t(9439),s=t(2791),c=t(7689),o={searchbar:"MoviePage_searchbar__Hfnpz"},i=t(6795),u="Searchbar_form__D-hp5",l="Searchbar_inputSearch__xAbPo",h="Searchbar_serchBtn__JmOW6",f=t(184);var m=function(e){var r=e.onSubmit,t=(0,s.useState)(""),n=(0,a.Z)(t,2),c=n[0],o=n[1];return(0,f.jsxs)("form",{className:u,onSubmit:function(e){e.preventDefault(),c?(r(c),o("")):i.Am.error("Please, enter your name movie!")},children:[(0,f.jsx)("input",{className:l,name:"query",value:c,type:"text",autoComplete:"off",placeholder:"Enter the movie name",onChange:function(e){o(e.currentTarget.value.toLowerCase().trim())}}),(0,f.jsx)("button",{type:"submit",className:h,children:"Search"})]})},v=t(5700),d=t(2743),x=t(4771),_=t(7367),p="MoviesBar_movieBarWrapper__1NLjU",j="MoviesBar_movieBarList__OTYcq",S="MoviesBar_movieBarListItem__e8kT6",y=t(1087),b=t(5861),Z=t(7757),g=t.n(Z),N="SearchByYear_selectedYear__3bTgh",w="SearchByYear_selectLabel__tWzcV",B="SearchByYear_selectYear__5Gye4",L="SearchByYear_searchText__5iNfz",k={},Y=function(e){var r=e.hendleIncrement;return(0,f.jsx)("div",{children:(0,f.jsx)("button",{className:k.btnLoadMore,type:"button",onClick:function(){return r()},children:"Load More"})})};var C=function(){var e=(0,s.useState)(0),r=(0,a.Z)(e,2),t=r[0],n=r[1],c=(0,s.useState)([]),o=(0,a.Z)(c,2),u=o[0],l=o[1],h=(0,s.useState)(null),m=(0,a.Z)(h,2),v=m[0],x=m[1],p=(0,s.useState)(!1),j=(0,a.Z)(p,2),S=j[0],y=j[1],Z=(0,s.useState)(1),k=(0,a.Z)(Z,2),C=k[0],M=k[1],P=(0,s.useState)(!1),T=(0,a.Z)(P,2),A=T[0],F=T[1];if((0,s.useEffect)((function(){if(0!==t){var e=function(){var e=(0,b.Z)(g().mark((function e(){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),F(!0),e.prev=2,e.next=5,_.Z.fetchByYear(C,t);case 5:r=e.sent,l(r),0===r.length&&i.Am.error("sorry, that's all the movies we could find"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),x(e.t0);case 13:return e.prev=13,y(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}();e()}}),[C,t]),v)return(0,f.jsx)("p",{children:v.message});for(var q=[],E=(new Date).getFullYear(),z=E;z>=E-50;z--)q.push(z);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:N,children:[(0,f.jsx)("label",{className:w,htmlFor:"year-select",children:"Select a year:"}),(0,f.jsxs)("select",{className:B,name:"year-select",id:"year-select",value:t,onChange:function(e){return n(e.target.value)},children:[(0,f.jsx)("option",{value:0,children:"Select a year"}),q.map((function(e){return(0,f.jsx)("option",{value:e,children:e},e)}))]})]}),u.length>0?(0,f.jsx)(d.Z,{movies:u}):S?(0,f.jsx)("p",{children:"Loading..."}):(0,f.jsx)("p",{className:L,children:"Please select a year to see movies."}),A&&(0,f.jsx)(Y,{hendleIncrement:function(){M(C+1)}})]})};var M=function(){var e=(0,c.TH)();return(0,f.jsxs)("div",{className:p,children:[(0,f.jsx)("ul",{className:j,children:(0,f.jsx)("li",{className:S,children:(0,f.jsx)(y.rU,{to:"/movie/actors/",state:{from:e},children:"Actors"})})}),(0,f.jsx)("div",{children:(0,f.jsx)(C,{})})]})},P=function(){var e=(0,c.s0)(),r=(0,c.TH)(),t=(0,s.useState)([]),u=(0,a.Z)(t,2),l=u[0],h=u[1],p=(0,s.useState)(""),j=(0,a.Z)(p,2),S=j[0],y=j[1],b=(0,s.useState)(0),Z=(0,a.Z)(b,2),g=Z[0],N=Z[1],w=(0,s.useState)(!1),B=(0,a.Z)(w,2),L=B[0],k=B[1],Y=(0,s.useCallback)((function(e){k(!0),_.Z.fetchSearchMovie(S,e).then((function(r){0===r.length?(i.Am.error("sorry, that's all the movies we could find"),k(!1)):(h((function(e){return[].concat((0,n.Z)(e),(0,n.Z)(r))})),N(e))})).catch((function(e){i.Am.error("Failed to fetch movies.")}))}),[S]);(0,s.useEffect)((function(){y(new URLSearchParams(r.search).get("query")),N(1)}),[r.search]),(0,s.useEffect)((function(){S&&Y(1)}),[Y,S]);return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(v.Z,{children:[(0,f.jsxs)("section",{className:o.searchbar,children:[(0,f.jsx)(m,{onSubmit:function(r){r!==S&&(h([]),e("?query=".concat(r)))}}),(0,f.jsx)(M,{})]}),(0,f.jsx)("section",{className:o.moviesListSearch,children:l&&(0,f.jsx)(x.Z,{dataLength:l.length,next:function(){Y(g+1)},hasMore:L,loader:(0,f.jsx)("p",{children:"Loading..."}),children:(0,f.jsx)(d.Z,{movies:l})})})]})})}},5861:function(e,r,t){function n(e,r,t,n,a,s,c){try{var o=e[s](c),i=o.value}catch(u){return void t(u)}o.done?r(i):Promise.resolve(i).then(n,a)}function a(e){return function(){var r=this,t=arguments;return new Promise((function(a,s){var c=e.apply(r,t);function o(e){n(c,a,s,o,i,"next",e)}function i(e){n(c,a,s,o,i,"throw",e)}o(void 0)}))}}t.d(r,{Z:function(){return a}})}}]);
//# sourceMappingURL=394.d6f27d30.chunk.js.map