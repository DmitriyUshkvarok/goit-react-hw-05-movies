"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[511],{1311:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var n=r(3433),a=r(9439),c=r(2791),o=r(7689),s={},u=r(7596),i="Searchbar_form__D-hp5",h="Searchbar_inputSearch__xAbPo",l="Searchbar_serchBtn__JmOW6",f=r(184);var m=function(e){var t=e.onSubmit,r=(0,c.useState)(""),n=(0,a.Z)(r,2),o=n[0],s=n[1];return(0,f.jsxs)("form",{className:i,onSubmit:function(e){e.preventDefault(),o?(t(o),s("")):u.Am.error("Please, enter your name movie!")},children:[(0,f.jsx)("input",{className:h,name:"query",value:o,type:"text",autoComplete:"off",placeholder:"Enter the movie name",onChange:function(e){s(e.currentTarget.value.toLowerCase().trim())}}),(0,f.jsx)("button",{type:"submit",className:l,children:"Search"})]})},d=r(5700),S=r(2743),p=r(4771),b=r(7367),v=function(){var e=(0,o.s0)(),t=(0,o.TH)(),r=(0,c.useState)([]),i=(0,a.Z)(r,2),h=i[0],l=i[1],v=(0,c.useState)(""),_=(0,a.Z)(v,2),x=_[0],Z=_[1],j=(0,c.useState)(0),g=(0,a.Z)(j,2),k=g[0],w=g[1],y=(0,c.useState)(!1),C=(0,a.Z)(y,2),A=C[0],L=C[1],N=(0,c.useCallback)((function(e){L(!0),b.Z.fetchSearchMovie(x,e).then((function(t){0===t.length?(u.Am.error("sorry, that's all the movies we could find"),L(!1)):(l((function(e){return[].concat((0,n.Z)(e),(0,n.Z)(t))})),w(e))})).catch((function(e){u.Am.error("Failed to fetch movies.")}))}),[x]);(0,c.useEffect)((function(){Z(new URLSearchParams(t.search).get("query")),w(1)}),[t.search]),(0,c.useEffect)((function(){x&&N(1)}),[N,x]);return(0,f.jsx)("section",{className:s.searchbar,children:(0,f.jsxs)(d.Z,{children:[(0,f.jsx)(m,{onSubmit:function(t){t!==x&&(l([]),e("?query=".concat(t)))}}),h&&(0,f.jsx)(p.Z,{dataLength:h.length,next:function(){N(k+1)},hasMore:A,loader:(0,f.jsx)("p",{children:"Loading..."}),children:(0,f.jsx)(S.Z,{movies:h})})]})})}}}]);
//# sourceMappingURL=511.baef2766.chunk.js.map