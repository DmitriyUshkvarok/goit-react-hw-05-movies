"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[309],{2743:function(e,t,a){a.d(t,{Z:function(){return S}});var r=a(1087),n=a(7689),c="MoviesList_moviesList__P6SP5",s="MoviesList_moviesItem__r+0sq",o="MoviesItem_cardWrapper__mxmjM",i="MoviesItem_imgWrapper__TWN0D",l="MoviesItem_moviesImg__MqMs7",u="MoviesItem_cardTitle__bY-Ko",h="MoviesItem_ratingStarsContainer__XGfJ5",m="MoviesItem_goldStar__duxiK",v="MoviesItem_grayStar__7ijiP",d="MoviesItem_ratingText__Hzr+S",_="MoviesItem_ratingNumber__6ftL3",f="MoviesItem_ratingBlock__5Wq5t",p="MoviesItem_red__gOdUC",g="MoviesItem_yellow__fL5Z0",x="MoviesItem_green__dxw18",j="MoviesItem_moviesYear__cT148",y=a(184);var N=function(e){var t=e.poster_path,a=e.title,r=e.vote_average,n=e.release_date,c=10*r,s=Math.floor(c/10),N=Array.from({length:10},(function(e,t){return t<s?(0,y.jsx)("span",{className:m,children:"\u2605"},"star-".concat(t)):(0,y.jsx)("span",{className:v,children:"\u2605"},"star-".concat(t))})),S="";return S=r<=4?p:r<7?g:x,(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:o,children:[(0,y.jsx)("div",{className:i,children:(0,y.jsx)("img",{className:l,src:t?"https://image.tmdb.org/t/p/w500/".concat(t):"https://via.placeholder.com/300x400",alt:a,width:300})}),(0,y.jsx)("h3",{className:u,children:a||"Movie without a title"}),(0,y.jsxs)("div",{className:h,children:[(0,y.jsx)("p",{className:d,children:r?N:"N/A"}),(0,y.jsx)("div",{className:"".concat(f," ").concat(S),children:(0,y.jsx)("span",{className:_,children:r?r.toFixed(1):"N/A"})}),(0,y.jsx)("p",{className:j,children:n?n.slice(0,4):"N/A"})]})]})})};var S=function(e){var t=e.movies,a=(0,n.TH)();return(0,y.jsx)("ul",{className:c,children:t.map((function(e,t){var n=e.id,c=e.poster_path,o=e.title,i=e.vote_average,l=e.release_date;return(0,y.jsx)("li",{className:s,children:(0,y.jsx)(r.rU,{to:"/movies/".concat(n),state:{from:a},children:(0,y.jsx)(N,{id:n,poster_path:c,title:o,vote_average:i,release_date:l},n)})},"".concat(n,"-").concat(t))}))})}},4309:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var r=a(3433),n=a(9439),c=a(2791),s=a(7689),o={searchbar:"MoviePage_searchbar__Hfnpz"},i=a(9085),l="Searchbar_form__D-hp5",u="Searchbar_inputSearch__xAbPo",h="Searchbar_serchBtn__JmOW6",m=a(184);var v=function(e){var t=e.onSubmit,a=(0,c.useState)(""),r=(0,n.Z)(a,2),s=r[0],o=r[1];return(0,m.jsxs)("form",{className:l,onSubmit:function(e){e.preventDefault(),s?(t(s),o("")):i.Am.error("Please, enter your name movie!")},children:[(0,m.jsx)("input",{className:u,name:"query",value:s,type:"text",autoComplete:"off",placeholder:"Enter the movie name",onChange:function(e){o(e.currentTarget.value.toLowerCase().trim())}}),(0,m.jsx)("button",{type:"submit",className:h,children:"Search"})]})},d=a(5700),_=a(2743),f=a(4771),p=a(7367),g={movieBarList:"MoviesBar_movieBarList__OTYcq",movieBarListItem:"MoviesBar_movieBarListItem__e8kT6"},x=a(1087),j=a(5861),y=a(4687),N=a.n(y),S={selectedYear:"SearchByYear_selectedYear__3bTgh",selectLabel:"SearchByYear_selectLabel__tWzcV",searchText:"SearchByYear_searchText__5iNfz",selectYear:"SearchByYear_selectYear__5Gye4",selectIcon:"SearchByYear_selectIcon__PBBt+","css-b62m3t-container":"SearchByYear_css-b62m3t-container__o2MPF"},b={},M=function(e){var t=e.hendleIncrement;return(0,m.jsx)("div",{children:(0,m.jsx)("button",{className:b.btnLoadMore,type:"button",onClick:function(){return t()},children:"Load More"})})},Z=a(4385),k=a(9806),I=a(1632);var B=function(){var e=(0,c.useState)(0),t=(0,n.Z)(e,2),a=t[0],r=t[1],s=(0,c.useState)([]),o=(0,n.Z)(s,2),l=o[0],u=o[1],h=(0,c.useState)(null),v=(0,n.Z)(h,2),d=v[0],f=v[1],g=(0,c.useState)(!1),x=(0,n.Z)(g,2),y=x[0],b=x[1],B=(0,c.useState)(1),L=(0,n.Z)(B,2),w=L[0],Y=L[1],T=(0,c.useState)(!1),A=(0,n.Z)(T,2),P=A[0],C=A[1];if((0,c.useEffect)((function(){if(0!==a){var e=function(){var e=(0,j.Z)(N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),C(!0),e.prev=2,e.next=5,p.Z.fetchByYear(w,a);case 5:t=e.sent,u(t),0===t.length&&i.Am.error("sorry, that's all the movies we could find"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),f(e.t0);case 13:return e.prev=13,b(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}();e()}}),[w,a]),d)return(0,m.jsx)("p",{children:d.message});for(var q=[],W=(new Date).getFullYear(),F=W;F>=W-50;F--)q.push(F);return(0,m.jsxs)("div",{className:S.selectedWrapper,children:[(0,m.jsxs)("div",{className:S.selectedYear,children:[(0,m.jsx)("label",{className:S.selectLabel,htmlFor:"year-select",children:"Select a year:"}),(0,m.jsxs)("div",{className:S.selectWrapper,children:[(0,m.jsx)(Z.ZP,{className:S.select,classNamePrefix:"react-select",name:"year-select",id:"year-select",value:{value:a,label:a},onChange:function(e){return r(e.value)},options:q.map((function(e){return{value:e,label:e}})),placeholder:"Select a year",menuPlacement:"auto"}),(0,m.jsx)("div",{className:S.selectIcon,children:(0,m.jsx)(k.G,{icon:I.CjD})})]})]}),l.length>0?(0,m.jsx)(_.Z,{movies:l}):y?(0,m.jsx)("p",{children:"Loading..."}):(0,m.jsx)("p",{className:S.searchText,children:"Please select a year to see movies."}),P&&(0,m.jsx)(M,{hendleIncrement:function(){Y(w+1)}})]})};var L=function(){var e=(0,s.TH)();return(0,m.jsxs)("div",{className:g.movieBarWrapper,children:[(0,m.jsx)("ul",{className:g.movieBarList,children:(0,m.jsx)("li",{className:g.movieBarListItem,children:(0,m.jsx)(x.rU,{to:"/movie/actors/",state:{from:e},children:"Actors"})})}),(0,m.jsx)("div",{children:(0,m.jsx)(B,{})})]})},w=function(){var e=(0,s.s0)(),t=(0,s.TH)(),a=(0,c.useState)([]),l=(0,n.Z)(a,2),u=l[0],h=l[1],g=(0,c.useState)(""),x=(0,n.Z)(g,2),j=x[0],y=x[1],N=(0,c.useState)(0),S=(0,n.Z)(N,2),b=S[0],M=S[1],Z=(0,c.useState)(!1),k=(0,n.Z)(Z,2),I=k[0],B=k[1],w=(0,c.useCallback)((function(e){B(!0),p.Z.fetchSearchMovie(j,e).then((function(t){0===t.length?(i.Am.error("sorry, that's all the movies we could find"),B(!1)):(h((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(t))})),M(e))})).catch((function(e){i.Am.error("Failed to fetch movies.")}))}),[j]);(0,c.useEffect)((function(){y(new URLSearchParams(t.search).get("query")),M(1)}),[t.search]),(0,c.useEffect)((function(){j&&w(1)}),[w,j]);return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(d.Z,{children:[(0,m.jsxs)("section",{className:o.searchbar,children:[(0,m.jsx)(v,{onSubmit:function(t){t!==j&&(h([]),e("?query=".concat(t)))}}),(0,m.jsx)(L,{})]}),(0,m.jsx)("section",{className:o.moviesListSearch,children:u&&(0,m.jsx)(f.Z,{dataLength:u.length,next:function(){w(b+1)},hasMore:I,loader:(0,m.jsx)("p",{children:"Loading..."}),children:(0,m.jsx)(_.Z,{movies:u})})})]})})}},7367:function(e,t,a){var r=a(1243),n="https://api.themoviedb.org/3/",c="f27eea818d2010463700365b0c06a16e";var s={fetchMoviesbyActors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return r.Z.get("".concat(n,"person/").concat(e,"/movie_credits?api_key=").concat(c,"&page=").concat(t)).then((function(e){return e.data.cast}))},fetchTrending:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return r.Z.get("".concat(n,"trending/all/day?api_key=").concat(c,"&page=").concat(e)).then((function(e){return e.data.results}))},fetchSearchMovie:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return r.Z.get("".concat(n,"search/movie?query=").concat(e,"&api_key=").concat(c,"&page=").concat(t)).then((function(e){return e.data.results}))},fetchMovieDetalis:function(e){return r.Z.get("".concat(n,"movie/").concat(e,"?api_key=").concat(c)).then((function(e){return e.data}))},fetchMovieCredits:function(e){return r.Z.get("".concat(n,"movie/").concat(e,"/credits?api_key=").concat(c)).then((function(e){return e.data}))},fetchMovieReview:function(e){return r.Z.get("".concat(n,"movie/").concat(e,"/reviews?api_key=").concat(c)).then((function(e){return e.data.results}))},fetchTrailerMovies:function(e){return r.Z.get("".concat(n,"movie/").concat(e,"/videos?api_key=").concat(c)).then((function(e){return e.data.results}))},fetchAllgenres:function(){return r.Z.get("".concat(n,"/genre/movie/list?api_key=").concat(c)).then((function(e){return e.data.genres}))},fetchByGenre:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return r.Z.get("".concat(n,"/discover/movie?api_key=").concat(c,"&with_genres=").concat(e,"&page=").concat(t)).then((function(e){return e.data}))},fetchActors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t?"".concat(n,"search/person?api_key=").concat(c,"&page=").concat(e,"&query=").concat(t):"".concat(n,"person/popular?api_key=").concat(c,"&page=").concat(e);return r.Z.get(a).then((function(e){return e.data}))},fetchByYear:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return r.Z.get("".concat(n,"discover/movie?api_key=").concat(c,"&sort_by=popularity.desc&page=").concat(e,"&primary_release_year=").concat(t)).then((function(e){return e.data.results}))}};t.Z=s}}]);
//# sourceMappingURL=309.212ce4ca.chunk.js.map