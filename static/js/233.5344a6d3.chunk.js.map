{"version":3,"file":"static/js/233.5344a6d3.chunk.js","mappings":"4MACA,EAAiC,iC,gFCAjC,EAA4B,6BAA5B,EAAyE,iC,SCkBzE,MAfA,YAAgC,IAAXA,EAAU,EAAVA,OACbC,GAAWC,EAAAA,EAAAA,MAEjB,OACE,eAAIC,UAAWC,EAAf,SACGJ,EAAOK,KAAI,gBAAGC,EAAH,EAAGA,GAAIC,EAAP,EAAOA,KAAP,OACV,SAAC,KAAD,CAAMC,GAAE,gBAAWF,GAAMG,MAAO,CAAEC,KAAMT,GAAxC,UACE,eAAIE,UAAWC,EAAf,UACE,uBAAIG,OAFiDD,EAD/C,KASjB,ECgDD,MAzDA,WACE,OAA4BK,EAAAA,EAAAA,UAAS,IAArC,eAAOC,EAAP,KAAeC,EAAf,KACA,GAAsCF,EAAAA,EAAAA,UAAS,GAA/C,eAAOG,EAAP,KAAoBC,EAApB,KACA,GAAoCJ,EAAAA,EAAAA,WAAS,GAA7C,eAAOK,EAAP,KAAmBC,EAAnB,KACA,GAA4BN,EAAAA,EAAAA,UAAS,IAArC,eAAOX,EAAP,KAAekB,EAAf,KAEMC,GAAcC,EAAAA,EAAAA,cAAY,WAC9BH,GAAc,GAEdI,EAAAA,EAAAA,cACiBP,GACdQ,MAAK,SAAAC,GACJN,GAAc,GACW,IAArBM,EAAUC,QACZC,EAAAA,GAAAA,MAAY,4CAGdZ,GAAU,SAAAa,GAAU,wBAAQA,IAAR,OAAuBH,GAAvB,IACpBR,GAAe,SAAAY,GAAQ,OAAIA,EAAW,CAAf,GACxB,IACAC,OAAM,SAAAC,GACLZ,GAAc,EACf,GACJ,GAAE,CAACH,IAiBJ,OAfAgB,EAAAA,EAAAA,YAAU,WACc,IAAlBlB,EAAOY,QACTL,GAEH,GAAE,CAACP,EAAQO,KAEZW,EAAAA,EAAAA,YAAU,WACRT,EAAAA,EAAAA,iBAEGC,MAAK,SAAAS,GACJb,EAAUa,EACX,IACAH,MAAM,QACV,GAAE,KAGD,oBAASzB,UAAWC,EAApB,UACE,UAAC4B,EAAA,EAAD,YACE,SAAC,EAAD,CAAWhC,OAAQA,KACnB,SAAC,IAAD,CACEiC,WAAYrB,EAAOY,OACnBU,KAAMf,EACNgB,SAAUnB,EACVoB,QAAQ,sCAJV,UAME,SAACC,EAAA,EAAD,CAAYzB,OAAQA,UAK7B,C","sources":["webpack://react-homework-template/./src/pages/HomePage/HomePage.module.css?5baa","webpack://react-homework-template/./src/components/GanreList/GanreList.module.css?562b","components/GanreList/GanreList.jsx","pages/HomePage/HomePage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"trandingMovies\":\"HomePage_trandingMovies__2UC1J\"};","// extracted by mini-css-extract-plugin\nexport default {\"ganreList\":\"GanreList_ganreList__Ukkui\",\"ganreListItem\":\"GanreList_ganreListItem__oINk6\"};","import { Link, useLocation } from 'react-router-dom';\nimport css from './GanreList.module.css';\nimport PropTypes from 'prop-types';\n\nfunction GenreList({ genres }) {\n  const location = useLocation();\n\n  return (\n    <ul className={css.ganreList}>\n      {genres.map(({ id, name }) => (\n        <Link to={`genre/${id}`} state={{ from: location }} key={id}>\n          <li className={css.ganreListItem}>\n            <p>{name}</p>\n          </li>\n        </Link>\n      ))}\n    </ul>\n  );\n}\nexport default GenreList;\n\nGenreList.propTypes = {\n  genres: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      name: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n};\n","import css from './HomePage.module.css';\nimport Container from 'components/Container/Container';\nimport MoviesList from 'components/MoviesList/MoviesList';\nimport { useState, useEffect, useCallback } from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport apiTheMovieDB from 'service/kino-api';\nimport { toast } from 'react-toastify';\nimport GenreList from 'components/GanreList/GanreList';\n\nfunction HomePage() {\n  const [movies, setMovies] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isFetching, setIsFetching] = useState(false);\n  const [genres, setGenres] = useState([]);\n\n  const fetchMovies = useCallback(() => {\n    setIsFetching(true);\n\n    apiTheMovieDB\n      .fetchTrending(currentPage)\n      .then(newMovies => {\n        setIsFetching(false);\n        if (newMovies.length === 0) {\n          toast.error('sorry ,thats all the movies we cold find');\n        }\n\n        setMovies(prevMovies => [...prevMovies, ...newMovies]);\n        setCurrentPage(prevPage => prevPage + 1);\n      })\n      .catch(error => {\n        setIsFetching(false);\n      });\n  }, [currentPage]);\n\n  useEffect(() => {\n    if (movies.length === 0) {\n      fetchMovies();\n    }\n  }, [movies, fetchMovies]);\n\n  useEffect(() => {\n    apiTheMovieDB\n      .fetchAllgenres()\n      .then(data => {\n        setGenres(data);\n      })\n      .catch('error');\n  }, []);\n\n  return (\n    <section className={css.trandingMovies}>\n      <Container>\n        <GenreList genres={genres} />\n        <InfiniteScroll\n          dataLength={movies.length}\n          next={fetchMovies}\n          hasMore={!isFetching}\n          loader={<p>Loading...</p>}\n        >\n          <MoviesList movies={movies} />\n        </InfiniteScroll>\n      </Container>\n    </section>\n  );\n}\n\nexport default HomePage;\n"],"names":["genres","location","useLocation","className","css","map","id","name","to","state","from","useState","movies","setMovies","currentPage","setCurrentPage","isFetching","setIsFetching","setGenres","fetchMovies","useCallback","apiTheMovieDB","then","newMovies","length","toast","prevMovies","prevPage","catch","error","useEffect","data","Container","dataLength","next","hasMore","loader","MoviesList"],"sourceRoot":""}